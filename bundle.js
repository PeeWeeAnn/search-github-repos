(()=>{"use strict";const e=document.querySelector(".search"),t=document.querySelector("input"),n=document.querySelector("button");async function a(t){let n=await fetch(`https://api.github.com/search/repositories?q=${t}&page=1&per_page=10`).then((e=>e.json())).catch((e=>console.log(e)));if(n.items.length){let a=document.createElement("p");s(e,a,"search_message","Найдены результаты по запросу: "),s(a,document.createElement("span"),"span",t),r(),function(e){let t=document.getElementById("results_list");e.forEach((e=>{let n=document.createElement("li"),a=document.createElement("a"),c=document.createElement("p"),r=document.createElement("p"),s=document.createElement("p");a.textContent=e.name,a.href=e.html_url,a.target="_blank",c.textContent=e.description||"No description",r.textContent="☆"+e.stargazers_count,s.textContent=new Date(e.created_at).toLocaleDateString(),n.append(a),n.append(c),n.append(r),n.append(s),t.append(n)}))}(n.items)}else{let n=document.createElement("p");s(e,n,"search_message","Ничего не найдено по запросу: "),s(n,document.createElement("span"),"span",t),r()}}const c=()=>{document.querySelectorAll("#results_list > *").forEach((e=>{l(e)}))},r=()=>{let e=document.querySelector(".search_message .span");e&&e.addEventListener("click",(e=>{t.value=e.target.textContent}))};function s(e,t,n,a){t.classList.add(n),t.textContent=a,e.append(t)}function l(e){e.remove()}t.addEventListener("keydown",(n=>{if("Enter"===n.key){if(n.preventDefault(),document.querySelector(".search_message")&&l(document.querySelector(".search_message")),n.currentTarget.value.trim()){if(n.currentTarget.value.length<3)return alert("Вы ввели менее 3-х символов."),!1}else{let t=document.createElement("p");s(e,t,"search_message","Вы ничего не ввели в поисковую строку!")}a(t.value),t.value="",c()}})),n.addEventListener("click",(n=>{if(n.preventDefault(),document.querySelector(".search_message")&&l(document.querySelector(".search_message")),t.value.trim()){if(t.value.length<3)return alert("Вы ввели менее 3-х символов."),!1}else{let t=document.createElement("p");s(e,t,"search_message","Вы ничего не ввели в поисковую строку!")}a(t.value),t.value="",c()}))})();